<!DOCTYPE html>
<html lang="es">
<head>
    <title>Página de Prueba de API</title>
</head>
<body>
    <h1>Prueba de API para CIMA Nahui</h1>
    <p>Esta página probará la conexión con la última versión de tu Google Apps Script.</p>
    <button id="test-btn">Ejecutar Prueba</button>
    <div id="response"></div>

    <script>
        const API_URL = 'https://script.google.com/macros/s/AKfycbxXXUPOvKK5HRSeFsM3LYVvkweqxKBhxMjxASg_0-7sEyke-LZ2eOPQkaz0quXoN3Mc/exec';

        document.getElementById('test-btn').addEventListener('click', () => {
            const responseDiv = document.getElementById('response');
            responseDiv.textContent = 'Enviando solicitud...';

            const testData = {
                action: 'testAction'
            };

            fetch(API_URL, {
                method: 'POST',
                body: JSON.stringify(testData),
                headers: { 'Content-Type': 'text/plain;charset=utf-8' },
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
                if (data.status === 'success') {
                    responseDiv.textContent = `ÉXITO: ${data.message}`;
                    responseDiv.style.color = 'green';
                } else {
                    throw new Error(data.message);
                }
            })
            .catch(error => {
                responseDiv.textContent = `ERROR: ${error.toString()}`;
                responseDiv.style.color = 'red';
            });
        });
    </script>
</body>
</html>
